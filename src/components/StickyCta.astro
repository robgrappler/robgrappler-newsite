---
// src/components/StickyCta.astro
const { href = "/join", label = "Unlock full access", subtext } = Astro.props;
---

<div id="stickyCta" class="sticky" aria-hidden="true">
    <a class="btn" href={href}>{label}</a>
    {subtext && <div class="sub">{subtext}</div>}
</div>

<script>
    const el = document.getElementById("stickyCta");
    const showAt = 240; // px scroll
    const onScroll = () => {
        const show = window.scrollY > showAt;
        el.setAttribute("aria-hidden", String(!show));
        el.classList.toggle("show", show);
    };
    window.addEventListener("scroll", onScroll, { passive: true });
    onScroll();
</script>

<style>
    .sticky {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        padding: 10px 12px 12px;
        background: rgba(0, 0, 0, 0.82);
        backdrop-filter: blur(10px);
        transform: translateY(120%);
        transition: transform 0.18s ease;
        z-index: 50;
    }
    .sticky.show {
        transform: translateY(0);
    }
    .btn {
        display: block;
        max-width: 640px;
        margin: 0 auto;
        padding: 14px 16px;
        border-radius: 12px;
        text-align: center;
        font-weight: 700;
        text-decoration: none;
        background: #111;
        border: 1px solid rgba(255, 255, 255, 0.12);
    }
    .sub {
        max-width: 640px;
        margin: 6px auto 0;
        font-size: 12px;
        opacity: 0.8;
        text-align: center;
    }
</style>
